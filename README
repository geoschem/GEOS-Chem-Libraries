README -- describes how to use GEOS-Chem-Libraries package
27 Apr 2012
GEOS-Chem Support Team
geos-chem-support@as.harvard.edu


OVERVIEW:
===============================================================================

GEOS-Chem v9-01-03 and higher versions require the netCDF library to be 
installed.  In order to facilitate building the netCDF library, the GEOS-Chem 
Support Team has constructed this package.

With GEOS-Chem-Libraries, you can build one of the folloiwng sets of 
libraries:

Either:
	netCDF-4.0
	ZLIB-1.2.3   (netCDF-4 depends on this)
	HDF5-1.8.1   (netCDF-4 depends on this) 

Or:
	netCDF-3.6.3

We recommend that you try to build the netCDF-4 library, since this is the
most recent version.  The netCDF-4 library is 100% backwards compatible with
netCDF-3 files.  If you have problems building netCDF-4 then you can try
to build netCDF-3.6.3, which has a simpler installation process.

Any version of netCDF may be used with GEOS-Chem.  If you already have a 
ersion of netCDF installed on your system, then you will not have to use
the GEOS-Chem-Libraries to install netCDF.  Ask your local IT guru(s) for
assistance.



CALLING SEQUENCE TO BUILD netCDF-4:
===============================================================================

To build the netCDF-4 library (and related libraries) using the Intel
Fortran Compiler ("IFORT"), type:

   make PREFIX=root_library_dir netcdf4

To build the libraries for the PGI compiler, type:

   make COMPILER=pgi PREFIX=root_library_dir netcdf4

Where "root_library_dir" is the full path of the directory where 
you would like to install the libraries.  If you have sysadmin privileges, 
then you can install the libraries directly into /usr/opt /usr/local,
or whatever is the customary library path on your machine. 

If you do not have sysadmin privileges, then you can install the libraries
on a directory in your home space, such as /home/YOUR_USER_ID/lib.

If you do not select a value for PREFIX, then the default values of
"root_library_dir" will be assigned:

   For IFORT compiler:  root_library_dir = "../opt/ifort"
   For PGI   compiler:  root_library_dir = "../opt/pgi"

You can install the libraries into the default "root_library_dir" path
and then have your sysadmin move them to a common space on your machine.

Individual library files will be installed into various subdirectories
of "root_library_dir", as follows:

For ZLIB:
   root_library_dir/zlib/include       # Include files (*.h)
   root_library_dir/zlib/lib           # Library file (libz.a)
   root_library_dir/zlib/share         # Manual pages & documentation

For HDF5:
   root_library_dir/HDF5/bin           # Utility programs (can ignore)
   root_library_dir/HDF5/include       # Include files (*.h)
   root_library_dir/HDF5/lib           # Library files (*.a)

For netCDF-4:
   root_library_dir/netcdf4/bin        # ncdump, ncgen programs
   root_library_dir/netcdf4/include    # Include files (*.h)
   root_library_dir/netcdf4/lib        # Library files (*.a)
   root_library_dir/netcdf4/share      # Manual pages & documentation



CALLING SEQUENCE TO BUILD netCDF-3:
===============================================================================

To build the netCDF-3 library (and related libraries) using the Intel
Fortran Compiler ("IFORT"), type:

   make PREFIX=root_library_dir netcdf3

To build the libraries for the PGI compiler, type:

   make COMPILER=pgi PREFIX=root_library_dir netcdf3

Where "root_library_dir" is the full path of the directory where 
you would like to install the libraries.  If you have sysadmin privileges, 
then you can install the libraries directly into /usr/opt /usr/local,
or whatever is the customary library path on your machine. 

If you do not have sysadmin privileges, then you can install the libraries
on a directory in your home space, such as /home/YOUR_USER_ID/lib.

If you do not select a value for PREFIX, then the default values of
"root_library_dir" will be assigned:

   For IFORT compiler:  root_library_dir = "../opt/ifort"
   For PGI   compiler:  root_library_dir = "../opt/pgi"

You can install the libraries into the default "root_library_dir" path
and then have your sysadmin move them to a common space on your machine.

Individual library files will be installed into various subdirectories
of "root_library_dir", as follows:

For netCDF-3:
   root_library_dir/netcdf3/bin        # ncdump, ncgen programs
   root_library_dir/netcdf3/include    # Include files (*.h)
   root_library_dir/netcdf3/lib        # Library files (*.a)
   root_library_dir/netcdf3/share      # Manual pages & documentation



TELLING GEOS-CHEM WHERE TO FIND THE LIBRARIES:
===============================================================================

GEOS-Chem will rely on certain environment variables to tell it where to
find the various libraries.  These environment variables may be placed
in your .cshrc or .bashrc file, depending on which shell you use.

For netCDF-4, set the following environment variables:

   In your .cshrc file:
   --------------------------------------------------------------------
   setenv ROOT_LIBRARY_DIR  "same directory as root_library_dir above"
   setenv INC_NETCDF        "$(ROOT_LIBRARY_DIR)/netcdf4/include"
   setenv LIB_NETCDF        "$(ROOT_LIBRARY_DIR)/netcdf4/lib"
   setenv INC_HDF5          "$(ROOT_LIBRARY_DIR)/hdf5/include"
   setenv LIB_HDF5          "$(ROOT_LIBRARY_DIR)/hdf5/lib"
   setenv LIB_ZLIB          "$(ROOT_LIBRARY_DIR)/zlib/lib"  

   Then type "source ~/.cshrc" at the Unix prompt to accept the changes.


   In your .bashrc file:
   --------------------------------------------------------------------
   ROOT_LIBRARY_DIR="same directory as root_library_dir above"
   INC_NETCDF=$(ROOT_LIBRARY_DIR)/netcdf4/include
   LIB_NETCDF=$(ROOT_LIBRARY_DIR)/netcdf4/lib
   INC_HDF5=$(ROOT_LIBRARY_DIR)/hdf5/include
   LIB_HDF5=$(ROOT_LIBRARY_DIR)/hdf5/lib
   LIB_ZLIB=$(ROOT_LIBRARY_DIR)/zlib/lib   
   export INC_NETCDF
   export LIB_NETCDF
   export INC_HDF5
   export LIB_HDF5
   export LIB_ZLIB

   Then type "source ~/.bashrc" at the Unix prompt to accept the changes.


For netCDF-3, set the following environment variables:

   In your .cshrc file:
   --------------------------------------------------------------------
   setenv ROOT_LIBRARY_DIR  "same directory as root_library_dir above"
   setenv INC_NETCDF        "$(ROOT_LIBRARY_DIR)/netcdf3/include
   setenv LIB_NETCDF        "$(ROOT_LIBRARY_DIR)/netcdf3/lib
   setenv INC_HDF5          ""
   setenv LIB_HDF5          ""
   setenv LIB_ZLIB          ""

   Then type "source ~/.cshrc" at the Unix prompt to accept the changes.

   In your .bashrc file:
   --------------------------------------------------------------------
   ROOT_LIBRARY_DIR="same directory as root_library_dir above"
   INC_NETCDF=$(ROOT_LIBRARY_DIR)/netcdf4/include
   LIB_NETCDF=$(ROOT_LIBRARY_DIR)/netcdf4/lib
   INC_HDF5=""
   LIB_HDF5=""
   LIB_ZLIB=""
   export INC_NETCDF
   export LIB_NETCDF
   export INC_HDF5
   export LIB_HDF5
   export LIB_ZLIB

   Then type "source ~/.bashrc" at the Unix prompt to accept the changes.
